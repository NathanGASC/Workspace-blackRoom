# Server_client_ts_setup
A basic setup to create Server & Client in typescript. The setup can handle back-end writed in something else than nodejs.

## Scripts
Here some usefull scripts:
```js
- "build:ops:before": "node ./ops/before.js", //Will execute before.js which is code which must be executed before compilation
- "build:typescript": "node ./ops/typescript.js", //Will execute typescript.js which will compile typescript files
- "build:browserify": "browserify ./dist/client/index.js -t [ partialify --alsoAllow html --alsoAllow css --alsoAllow txt --alsoAllow md ] -t imgurify -o ./dist/client/index.js", //Browserify will transform compiled typescript files in js file which are understandable for the navigator
- "build:ops:after": "node ./ops/after.js", //Will execute after.js which is code which should be executed after compilation
- "build:prisma:client": "npx prisma generate --schema=./src/server/prisma/schema.prisma", //Generate the prisma library from prisma schema used to do query in back-end
- "build:prisma:migrate": "npx prisma migrate dev --name migration --schema=./src/server/prisma/schema.prisma", //If there is modification in the prisma schema, will apply them to the database.
- "build:prisma": "npm run build:prisma:client && npm run build:prisma:migrate", //Run the Prisma build chain
- "build:uglify": "uglifyjs-folder ./dist/client/ -x .js -eo ./dist/client/", //Minify the code
- "build": "npm run build:ops:before && npm run build:typescript && npm run build:browserify && npm run build:ops:after", //run the build chain
- "build:watch": "concurrently -n code,prisma \"npm run build:watch:code\" \"npm run build:watch:prisma\"", //run the build chain each time a file is saved
- "build:watch:code": "nodemon -e ts,html,css,png,jpeg,jpg,js,json,md --ignore ./dist/ --exec \"npm run build\"", //build the code each time a file is saved
- "build:watch:prisma": "nodemon -e prisma --ignore ./dist/ --exec \"npm run build:prisma\"", //build prisma each time a file is saved
- "build:prod": "npm run build && npm run build:uglify", //build for prod
- "start": "node ./ops/start.js", //start the nodejs server
- "seed": "ts-node ./src/server/prisma/seed.ts", //seed the database
- "seed:big": "ts-node ./src/server/prisma/seed.ts -- -l 100" //run the seed script 100x
```
So if you want to test the setup, do:
```bash
npm run build:watch
```
And once build is done in another bash or cmd
```bash
npm run start
```

## Env variable
```
#Path to the database generated by prisma. Note: file:. = ./src/server/prisma/.
DATABASE_URL=file:./databases/dev.sqlite

#Boolean which tell if back-end should be compiled from typescript to js or if it's must be copied. (You want to copy if you use another language for the back-end)
COPY_SERVER=TRUE
```
